{"version":3,"sources":["webpack:///webpack/bootstrap ecd37962d29c01b278b3?8286","webpack:///./pages/index.js?f7ee","webpack:///./src/boot.js?e7e3","webpack:///./src/core.js?3240","webpack:///./src/game.js?c7ef","webpack:///./src/play.js?66f3","webpack:///./src/start.js?f1f7","webpack:///external \"babel-runtime/regenerator\"?ed22","webpack:///external \"jquery\"?0b76","webpack:///external \"next/head\"?60d5","webpack:///external \"preloader\"?8332","[absolute-resource-path]","webpack:///external \"styled-jsx/style\"?f384"],"names":["window","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","requestID","setTimeout","cancelAnimationFrame","mozCancelAnimationFrame","clearTimeout","game","canvas","$","click","fadeIn","fadeOut","c","drawRect","drawImage","drawText","drawCircle","loadImg","clearRect","Boot","VISIBILITY_DURATION","HIDE_ANIMATION_DURATION","VOODOO_LOGO_HEIGHT","VOODOO_LOGO_WIDTH","BENTO_LOGO_HEIGHT","BENTO_LOGO_WIDTH","LIGHT_FONT_SIZE","BOLD_FONT_SIZE","CIRCLE_RADIUS","framesPerSecond","bestScore","blackBlock","x","y","whiteBlock","height","hideAnimation","timestamp","draw","Promise","resolve","hide_animation","drawStartScreen","n","drawAni","homePageAssetsPath","width","ani","setInterval","clearInterval","percentage","halfCanvasWidth","halfCanvasHeight","context","assets","scale","assetsRoot","assetsPath","tutorialPageAssetsPath","beeDiePageAssetsPath","cacheImage","BLOCK_RADIUS","loader","loader2","loader3","Core","canvasElm","devicePixelRatio","getContext","imageSmoothingEnabled","imageSmoothingQuality","innerHeight","innerWidth","Preloader","xhrImages","loadingAssets","map","path","reject","img","Image","onload","src","push","all","i","progressCallback","completeCallback","on","length","add","load","leftX","topY","w","h","color","fillStyle","fillRect","centerX","centerY","radius","beginPath","arc","Math","PI","fill","textSize","font","text","fillText","isCached","find","arr","arrPath","total","loadImgFun","num","imgArr","console","log","size","blockRadius","strokeStyle","lineJoin","lineWidth","strokeRect","xStart","yStart","xEnd","yEnd","moveTo","lineTo","lineCap","stroke","ms","sleep","preload","loadAssets","preloadHomageAssets","preloadTutorialAssets","preloadBeeDieAssets","score","availableCircle","boot","Game","style","document","body","clientHeight","start","play","init","loadHomePageAssets","show","run","bind","loadHomePageAssetsFinished","loadBeeDieAssetsFinished","progress","drawLoadingProcess","parseInt","display","drawLine","drawBlock","drawImage2","Play","CIRCLE_DIAMETER","LINE_WIDTH","BLOCK_MARGIN","SPEED","startAnimationEnded","lastAddedTime","lastBlockCollisionTime","restartLabelTime","restart","listenersApplied","lastCoordinateX","distanceToX","swipeDirection","end","pause","newBestScore","blocked","circles","cols","points","blocks","lines","finish","hitBlock","restartOpacity","reverseOpacity","dieBeeFlag","dieBeeFlag2","finishFlag","value","onTabFocusOff","visibilityState","onTouch","changedTouches","touch","removeEventListener","showStartScreen","abs","pageX","restartLabelAnimation","opacity","parseFloat","toFixed","beforePlayAnimation","startYPosition","circle","key","applyListeners","before_play_animation","playAnimation","addPoints","addBlocks","handleBlockCollision","updateCircles","updateBlocks","updatePoints","updateLines","finishGame","block","point","gameOver","bee","blockValue","currentPoints","blockSize","numberOfLine","random","lineHeight","floor","randomBlock","line","margin","getBlockColor","addLines","blockBottomPosition","blockMargin","playerX","playerY","reduce","previous","props","concat","lineCollision","some","prev","distance","sqrt","speed","play_animation","pop","numberOfPoints","lastCircle","addEventListener","defaultX","defaultY","localStorage","getItem","oneColWith","Start","startInstructionOpacity","useTouch","FirstFlag","showTutorial","hide","querySelector","evt","preventDefault","type","instructionAnimation","runGame"],"mappings":"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;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGJ;;;;;;6BAGKwH,O,EAAS;;AAEV,iBAAKA,OAAL,GAAeA,OAAf;;AAEA;AACA;;AAEA;AACAjI,qBAAS4H,aAAT,CAAuB,OAAvB,EAAgCZ,gBAAhC,CAAiD,WAAjD,EAA8D,KAAKU,YAAnE;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,iBAAKvO,IAAL;AACH;;AAEE;;;;;;;yDA5JcmO,K;;;;;;;;;;;;;;;ACTrB,sD;;;;;;;ACAA,mC;;;;;;;ACAA,sC;;;;;;;ACAA,sC;;;;;;;ACAA,kC;;;;;;;ACAA,6C","file":"bundles/pages/index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tvar threw = true;\n \t\ttry {\n \t\t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n \t\t\tthrew = false;\n \t\t} finally {\n \t\t\tif(threw) delete installedModules[moduleId];\n \t\t}\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ecd37962d29c01b278b3","\nimport { Component } from 'react'\nimport Head from 'next/head'\nimport Game from '../src/game'\nimport $ from  'jquery'\n\nexport default class extends Component {\n\n    componentDidMount() {\n        // Client-side\n        if(typeof window !== 'undefined') {\n\n            window.requestAnimFrame = window.requestAnimationFrame \n                || window.webkitRequestAnimationFrame \n                || window.mozRequestAnimationFrame \n                || window.oRequestAnimationFrame \n                || window.msRequestAnimationFrame \n                || function(requestID) {\n                    window.setTimeout(requestID, 1000 / 60);\n                };\n\n            window.cancelAnimationFrame = window.cancelAnimationFrame\n                || window.mozCancelAnimationFrame\n                || function(requestID){clearTimeout(requestID)};\n                 \n            \n            const game = new Game(this.canvas)\n        }\n\n\n        \n\n        \n\n        //点击规则\n        $(\".rule\").click(function(){\n            $(\".ruleShow\").fadeIn(500);\n        })\n\n    \n\n        \n\n        //点击遮罩消失\n        $(\".ruleShow\").click(function(){\n            $(this).fadeOut(500);\n        })\n    }\n\n    render() {\n        return (\n            <div className=\"gameContainer\">\n                <Head>\n                    <title>皇帝蜂大作战</title>\n                    <meta name=\"viewport\" content=\"initial-scale=1.0, width=device-width\" />\n                    <meta name=\"apple-mobile-web-app-capable\" content=\"yes\" />\n                    <meta name=\"mobile-web-app-capable\" content=\"yes\" />\n                    <link rel=\"manifest\" href=\"/manifest.json\" />\n                    <link rel=\"preload\" href=\"/static/fonts/Montserrat-Light.ttf\" as=\"font\" />\n                    <link rel=\"preload\" href=\"/static/fonts/Montserrat-Thin.ttf\" as=\"font\" />\n                </Head>\n                <canvas\n                    ref={c => this.canvas = c}\n                    height=\"450\"\n                    width=\"600\"\n                />\n                <img className='share' src='/static/assets/share.png' alt='' />\n                <img className='ruleShow' src='/static/assets/rule.png' alt='' />\n                <div className='mask'></div>\n                <div className='beeBox'>\n                    <div className='play'></div>\n                    <div className='rule'></div>\n                </div>\n                <style jsx global>\n                    {`\n                        html, body {\n                            height: 100vh;\n                            margin: 0;\n                            overflow: hidden;\n                            background-color: black;\n                        }\n                        p{\n                            margin: 0;\n                            padding: 0;\n                        }\n                        .off{\n                            position: absolute;\n                            right: -10%;\n                            top: 0;\n                            width: 13%;\n                            margin-top: -18%;\n                        }\n                        .share,.ruleShow{\n                            width: 100%;\n                            height: auto;\n                            position: absolute;\n                            left: 0;\n                            top: 0;\n                            z-index: 1000;\n                            display:none;\n                        }\n                        .beeBox{\n                            position: absolute;\n                            width: 66%;\n                            height: 81.75vw;\n                            left: 17%;\n                            top: 23%;\n                            background-image: url(/static/assets/p1-t2.png);\n                            background-repeat: no-repeat;\n                            background-size: 100% auto;\n                            display:none;\n                        }\n                        .palyAgainBox{\n                            width:80%;\n                            height:100vw;\n                            position: absolute;\n                            left: 10%;\n                            top: 32%;\n                            // border: 1px solid white;\n                            display:none;\n                        }\n                        .frendScore{\n                            width: 100%;\n                            height: 17vw;\n                            position: relative;\n                            overflow-y: auto;\n                            color: white;\n                            text-align: center;\n                        }\n                        .playAgainBg{\n                            width: 100%;\n                            height: 44.42vw;\n                            position: absolute;\n                            background-image: url(/static/assets/playAgain.png);\n                            background-repeat: no-repeat;\n                            background-size: 100% auto;\n                        }\n                        .playAgainBg div{\n                            margin-left: 15%;\n                            width: 70%;\n                            // border: 1px solid white;\n                        }\n                        .beeBox div{\n                            margin-left: 20%;\n                            width: 60%;\n                            //border: 1px solid white;\n                        }\n                        .play{\n                            margin-top: 81%;\n                            height:14%\n                        }\n                        .playAgain{\n                            margin-top: 12%;\n                            height: 28%;\n                        }\n                        .rule{\n                            margin-top: 3%;\n                            height: 10%;\n                        }\n                        .mask{\n                            width: 100%;\n                            height: 100%;\n                            position: fixed;\n                            left: 0;\n                            top: 0;\n                            z-index: 100;\n                            background-image: url(/static/assets/bg.png);\n                            background-repeat: no-repeat;\n                            background-size: 100% 100%;\n                            display: none;\n                        }\n                        .rankList{\n                            width:90%;\n                            height: 80%;\n                            overflow: auto;\n                        }\n                        .rankList p{\n                            margin-top: 5%;\n                            color: #edb97b;\n                            width: 100%;\n                            text-align: center;\n                            font-size: 16px;\n                            padding: 5px 0;\n                        }\n                        .listName{\n                            display: inline-block;\n                            width: 50%;\n                            text-align: right;\n                        }\n                        .listScore{\n                            display: inline-block;\n                            width: 50%;\n                            text-align: left;\n                        }\n                        .myScore{\n                            color:#edb97b;\n                            width: 100%;\n                            text-align: center;\n                            font-size: 16px;\n                        }\n                        .rankBox{\n                            width: 80%;\n                            height: 80%;\n                            position: absolute;\n                            z-index: 10001;\n                            left: 10%;\n                            top:10%;\n                            display:none;\n                        }\n                        .rankTitle{\n                            color: #fbe0b2;\n                            width: 100%;\n                            text-align: center;\n                        }\n                        .rankExplain{\n                            color:#edb97b;\n                            width: 100%;\n                            text-align: center;\n                            font-size: 13px;\n                        }\n                        .gameContainer {\n                            height: 100vh;\n                        }\n\n                        @font-face {\n                            font-family: \"Montserrat-Regular\";\n                            src: url(\"/static/fonts/Montserrat-Regular.ttf\") format(\"truetype\")\n                        }\n                        @font-face {\n                            font-family: \"Montserrat-Light\";\n                            src: url(\"/static/fonts/Montserrat-Light.ttf\") format(\"truetype\")\n                        }\n                        @font-face {\n                            font-family: \"Montserrat-Thin\";\n                            src: url(\"/static/fonts/Montserrat-Thin.ttf\") format(\"truetype\")\n                        }\n                    `}\n                </style>\n            </div>\n        )\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./pages/index.js","\"use strict\"\n\nimport { canvas, Core, halfCanvasHeight, halfCanvasWidth, scale, homePageAssetsPath } from './core'\nconst { drawRect, drawImage, drawText, drawCircle , loadImg, clearRect } = Core;\nimport $ from  'jquery';\n\n/**\n * Credits page class\n */\nexport default class Boot {\n\n    VISIBILITY_DURATION = 1500\n    HIDE_ANIMATION_DURATION = 1000\n\n    VOODOO_LOGO_HEIGHT = 85\n    VOODOO_LOGO_WIDTH = 300\n    BENTO_LOGO_HEIGHT = 85\n    BENTO_LOGO_WIDTH = 150\n\n    LIGHT_FONT_SIZE = 33\n    BOLD_FONT_SIZE = 48\n    CIRCLE_RADIUS = 10\n\n    framesPerSecond = 60\n    bestScore = 0;\n\n    blackBlock = {\n        x: 0,\n        y: 0\n    }\n\n    whiteBlock = {\n        x: 0,\n        y: (canvas.height/2)\n    }\n\n    constructor() {\n        \n\n\n        // this.voodooLogo = {\n        //     x: halfCanvasWidth - ((this.VOODOO_LOGO_WIDTH * scale) / 2),\n        //     y: (halfCanvasHeight / 2) - ((this.VOODOO_LOGO_HEIGHT * scale) / 2)\n        // }\n\n        // this.bentoLogo = {\n        //     x: halfCanvasWidth - ((this.BENTO_LOGO_WIDTH * scale) / 2),\n        //     y: ((halfCanvasHeight / 2) * 3) - ((this.BENTO_LOGO_HEIGHT * scale) / 2)\n        // }\n\n    }\n\n    /**\n     * Display the boot state the first time\n     */\n    display() {\n\n        // Preload fonts because preload seems not working on chrome :'(\n        drawText(0, -200, 1, 'black', 'Montserrat-Thin', 'a')\n        drawText(0, -200, 1, 'black', 'Montserrat-Regular', 'a')\n\n\n        // if(localStorage.key('bestScore') !== null) {\n        //     this.bestScore = localStorage.getItem('bestScore')\n        // }\n\n        this.draw()\n        return Promise.resolve()\n    }\n\n    /**\n     * Hide the boot state with animation\n     */\n    hide() {\n        this.hide_animation = window.requestAnimationFrame(this.hideAnimation)\n    }\n\n    hideAnimation = (timestamp) => {\n\n        // if(this.blackBlock.x >= -(canvas.width) && this.whiteBlock.x <= canvas.width) {\n        //     this.blackBlock.x -= (25 * scale)\n        //     this.voodooLogo.x -= (25 * scale)\n\n        //     this.whiteBlock.x += (25 * scale)\n        //     this.bentoLogo.x += (25 * scale)\n        //     this.draw()\n        //     window.requestAnimationFrame(this.hideAnimation)\n        // } else {\n        //     window.cancelAnimationFrame(this.hide_animation)\n        // }\n    }\n\n    draw() {\n        // Background\n        //一开始屏的背景\n        // drawRect(0, 0, canvas.width, canvas.height, 'black')\n        // drawImage(\n        //     0,\n        //     0,\n        //     'static/assets/bg.png',\n\t\t// \tcanvas.width,\n\t\t// \tcanvas.height\n        // )\n\n        // Black and white block\n        //drawRect(this.blackBlock.x, this.blackBlock.y, canvas.width, canvas.height / 2, '#212121')\n        //drawRect(this.whiteBlock.x, this.whiteBlock.y, canvas.width, canvas.height / 2, 'white')\n\n        // Voodoo and Bento logo\n        //drawImage(this.voodooLogo.x, this.voodooLogo.y, \"static/voodoo.png\", this.VOODOO_LOGO_WIDTH*scale, this.VOODOO_LOGO_HEIGHT*scale)\n        //drawImage(this.bentoLogo.x, this.bentoLogo.y, \"static/bento.png\", this.BENTO_LOGO_WIDTH*scale, this.BENTO_LOGO_HEIGHT*scale)\n\n        // During the hide animation we display a preview of the start screen.\n        // When the white and black block are enough away from the center we can\n        // write the text without blink effect.\n        // if(this.blackBlock.x < -(canvas.width/2) - (canvas.width/4)) {\n        //     this.drawStartScreen()\n        // }\n        this.drawStartScreen();\n        \n    }\n\n\n    drawStartScreen() {\n        var n = 0;//帧数\n\n        function drawAni(){\n            drawImage(\n                0,\n                0,\n                homePageAssetsPath[n],\n                canvas.width,\n                canvas.height\n            )\n            n++;\n        }\n\n        var ani = setInterval(function(){\n            if(n>74){\n                clearInterval(ani);\n                drawImage(\n                    0,\n                    0,\n                    'static/assets/bg.png',\n                    canvas.width,\n                    canvas.height\n                )\n                \n                   //绘制首页头顶\n                   drawImage(\n                    0,\n                    0,\n                    'static/assets/p1-t1.png',\n                    canvas.width,\n                    canvas.width / 2.072\n                )\n                $(\".beeBox\").fadeIn(1000);\n            }else{\n                drawAni();\n            }\n            \n        },1000/20)\n    }\n\n    drawLoadingProcess(percentage){\n        //绘制首页头顶\n        clearRect();\n\n        drawText(\n            halfCanvasWidth - (50*scale), \n            halfCanvasHeight - (50*scale), \n            16 * scale,\n            'white', \n            'Montserrat-Thin', \n            \"Loading \" + percentage + \"%\"\n        );\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/boot.js","\"use strict\"\n\nimport Preloader from 'preloader'\n\nexport let context = null\nexport let canvas = null\nexport let halfCanvasHeight = null\nexport let halfCanvasWidth = null\nexport let assets = []\nexport let scale = 1\n\nconst assetsRoot = '/static/assets';\nconst assetsPath = [\n    `${assetsRoot}/Bar.png`,\n    `${assetsRoot}/Bloc.png`,\n    `${assetsRoot}/Circle.png`\n]\n\nexport let homePageAssetsPath = [];\nexport let tutorialPageAssetsPath = [];\nexport let beeDiePageAssetsPath = [];\n\n\nconst cacheImage = []\n\nconst BLOCK_RADIUS = 20\n\nlet loader = null;\nlet loader2 = null;\nlet loader3 = null;\n\nexport class Core {\n\n    constructor(canvasElm) {\n        scale = window.devicePixelRatio;\n        canvas = canvasElm;\n        context = canvas.getContext('2d');\n        context.scale(scale,scale)\n\n        context.imageSmoothingEnabled = true;\n        context.imageSmoothingQuality = \"high\";\n\n        halfCanvasHeight = (window.innerHeight * scale) / 2;\n        halfCanvasWidth = (window.innerWidth * scale) / 2;\n\n        loader = Preloader({\n          xhrImages: false\n        });\n\n        loader2 = Preloader({\n          xhrImages: false\n        });\n\n        loader3 = Preloader({\n          xhrImages: false\n        });\n    }\n\n    /**\n     * Preload assets\n     */\n    static async preload() {\n\n        let loadingAssets = assetsPath.map((path) => {\n            return new Promise((resolve, reject) => {\n                const img = new Image();\n                img.onload = resolve;\n                img.src = path;\n                assets.push(img);\n            }) \n        })\n\n        return Promise.all(loadingAssets)\n    }\n\n    static async loadAssets() {\n\n        // home page assets\n        for(var i=0;i<75;i++){\n            var img = assetsRoot + '/page/'+i+'.png';\n            // var img = 'https://gl20181019.oss-cn-hangzhou.aliyuncs.com/assets/page/'+i+'.png';\n            homePageAssetsPath.push(img);\n        }\n\n        // tutorial\n        for(var i=1;i<210;i++){\n            var img = assetsRoot + '/course/'+i+'.png';\n            // var img = 'https://gl20181019.oss-cn-hangzhou.aliyuncs.com/assets/course/'+i+'.png';\n            tutorialPageAssetsPath.push(img);\n        }\n        \n        // for(var i=0;i<25;i++){\n        //     // var img = assetsRoot + '/animation/beedie/beeDie_iphone_0000'+i+'.png';\n        //     // if(i > 9)\n        //     //     img = assetsRoot + '/animation/beedie/beeDie_iphone_000'+i+'.png';\n\n        //     var img = 'https://gl20181019.oss-cn-hangzhou.aliyuncs.com/assets/animation/beedie/beeDie_iphone_0000'+i+'.png';\n        //     if(i > 9)\n        //        img = 'https://gl20181019.oss-cn-hangzhou.aliyuncs.com/assets/animation/beedie/beeDie_iphone_000'+i+'.png';\n\n        //     beeDiePageAssetsPath.push(img);\n        // }\n    }\n\n    static async preloadHomageAssets(progressCallback, completeCallback) {\n\n\n        loader.on('progress', progressCallback);\n\n        loader.on('complete', function(){\n            //loader.reset();\n            completeCallback();\n        });\n\n        for (var i = homePageAssetsPath.length - 1; i >= 0; i--) {\n            loader.add(homePageAssetsPath[i]);\n        }\n        \n        loader.load();\n    }\n\n\n\n    static async preloadTutorialAssets(progressCallback, completeCallback) {\n\n        \n\n        loader2.on('progress', progressCallback);\n\n        loader2.on('complete', completeCallback);\n\n        for (var i = tutorialPageAssetsPath.length - 1; i >= 0; i--) {\n            loader2.add(tutorialPageAssetsPath[i]);\n        }\n        \n        loader2.load();\n    }\n\n    static async preloadBeeDieAssets(progressCallback, completeCallback) {\n\n        \n\n        loader3.on('progress', progressCallback);\n\n        loader3.on('complete', completeCallback);\n\n        for (var i = beeDiePageAssetsPath.length - 1; i >= 0; i--) {\n            loader3.add(beeDiePageAssetsPath[i]);\n        }\n        \n        loader3.load();\n    }\n\n    /**\n     * \n     * @param {number} leftX \n     * @param {number} topY \n     * @param {number} w \n     * @param {number} h \n     * @param {string} color \n     */\n    static drawRect(leftX, topY, w, h, color) {\n        context.fillStyle = color\n        context.fillRect(leftX, topY, w, h)\n    }\n    \n    /**\n     * \n     * @param {number} centerX \n     * @param {number} centerY \n     * @param {number} radius \n     * @param {string} color \n     */\n    static drawCircle(centerX, centerY, radius, color) {\n        context.fillStyle = color\n        context.beginPath()\n        context.arc(centerX, centerY, radius, 0, Math.PI * 2, true)\n        context.fill()\n    }\n    \n    /**\n     * \n     * @param {number} x \n     * @param {number} y \n     * @param {number} textSize \n     * @param {string} color \n     * @param {string} font \n     * @param {string} text \n     */\n    static drawText(x, y, textSize, color, font, text) {\n        context.font = `normal ${textSize}px ${font}`;\n        context.fillStyle = color\n        context.fillText(text, x, y);\n    }\n\n    /**\n     * \n     * @param {number} x \n     * @param {number} y \n     * @param {string} path \n     * @param {number} w \n     * @param {number} h\n     */\n    static drawImage(x, y, path, w, h) {\n\n        const isCached = cacheImage.find(img => img.path === path)\n\n        if(isCached) {\n            return context.drawImage(isCached.img, x, y, w, h)\n        }\n\n        let img = new Image();\n        img.src = path;\n        img.onload = function() {\n            cacheImage.push({\n                path,\n                img\n            })\n            context.drawImage(img, x, y, w, h);\n        };\n    }\n\n    /**\n     * \n     */\n    static loadImg(arr,n) {\n        var i = 0;\n        var arrPath = arr;//图片数组\n        var total = n;\n        function loadImgFun(num,imgArr){\n            let img = new Image();\n            img.src = imgArr[num];\n            var path = imgArr[num];\n            console.log(path);\n            if(num<total){\n                img.onload = function() {\n                    cacheImage.push({\n                        path,\n                        img\n                    })\n                    i++;\n                    loadImgFun(i,arrPath);\n                    \n                };\n            }\n        }\n        loadImgFun(i,arrPath);\n    }\n\n\n    /**\n     * Draw block\n     * @param {number} x \n     * @param {number} y \n     * @param {number} size \n     * @param {string} color \n     */\n    static drawBlock(x,y, size, color) {\n\n        const blockRadius = BLOCK_RADIUS * scale\n\n        context.strokeStyle = color;\n        context.lineJoin = \"round\";\n        context.lineWidth = blockRadius;\n\n        context.strokeRect(\n            x + (blockRadius/2), \n            y + (blockRadius/2), \n            size - blockRadius, \n            size - blockRadius\n        );\n        context.fillStyle = color;\n        context.fillRect(\n            x + (blockRadius/2), \n            y + (blockRadius/2), \n            size - blockRadius, \n            size - blockRadius\n        );\n    }\n\n    /**\n     * @param  {number} xStart\n     * @param  {number} yStart\n     * @param  {number} xEnd\n     * @param  {number} yEnd\n     * @param  {number} lineWidth\n     * @param  {string} color\n     */\n    static drawLine(xStart, yStart, xEnd, yEnd, lineWidth, color) {\n        context.beginPath();\n        context.moveTo(xStart,yStart);\n        context.lineTo(xEnd, yEnd);\n        context.lineWidth = lineWidth;\n        context.strokeStyle = color;\n        context.lineCap=\"round\"\n        context.stroke();\n    }\n\n    /**\n     * Using this method to debug and check the center of the canvas\n     */\n    static drawNet() {\n        for(var i = 0; i < canvas.height; i += 40) {\n            context.fillStyle = 'white'\n            context.fillRect(canvas.width/2 - 1, i, 2, 20)\n        }\n    }\n\n    /**\n     * Suspends the execution until the time-out interval elapses\n     * @param {integer} ms Milliseconds to sleep\n     */\n    static async sleep(ms) {\n        return new Promise(async (resolve) => {\n            await setTimeout(resolve, ms);\n        })\n    }\n\n    static clearRect() {\n        context.clearRect(0, 0, canvas.height, canvas.width);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core.js","\"use strict\"\nimport { Core } from './core'\nimport Boot from './boot'\nimport Start from './start'\nimport Play from './play'\n\nconst { preload,loadAssets,preloadHomageAssets, preloadTutorialAssets, preloadBeeDieAssets } = Core\n\nexport let bestScore = 0;\nexport let score = 0;\nexport let availableCircle = 4;\n\nlet boot = null;\n\nexport default class Game extends Core {\n\n    constructor(canvas) {\n        super(canvas)\n        \n        const scale = window.devicePixelRatio;\n\n        // Set the canvas full screen\n        canvas.width = window.innerWidth * scale;\n        canvas.height = window.innerHeight * scale;\n\n        canvas.style.width = window.innerWidth + 'px'\n        canvas.style.height = document.body.clientHeight + 'px'\n\n        //this.boot = new Boot()\n        boot = new Boot();\n        this.start = new Start()\n        this.play = new Play()\n\n        this.init()\n    }\n\n    async init() {\n\n        // Display the boot state\n        //boot.display()\n        // During the boot state preload assets\n        await preload()\n        await this.loadHomePageAssets()\n\n        // Sleep until the visibility duration of the boot state\n        await sleep(boot.VISIBILITY_DURATION)\n        // Hide the boot state\n        //boot.hide()\n        // Wait the end of the animation\n        await sleep(boot.HIDE_ANIMATION_DURATION)\n        // Show the start menu\n        this.start.show(this.play.run.bind(this.play))\n\n        setTimeout(this.loadHomePageAssetsFinished, 3000);\n        setTimeout(this.loadBeeDieAssetsFinished, 6000);\n    }\n\n    async loadHomePageAssets()\n    {\n        loadAssets();\n        preloadHomageAssets(function(progress){\n            //console.log(\"=============preload\" + progress);\n            boot.drawLoadingProcess(parseInt(progress*100));\n\n            if(progress > 0.98)\n            {\n                //preloadTutorialAssets(function(progress){},function(){});\n            }\n        }, function(){\n            //console.log('============all content loaded!');\n\n            boot.display();\n\n        })\n    }\n\n    async loadHomePageAssetsFinished()\n    {\n        preloadTutorialAssets(function(progress){},function(){});\n    }\n\n\n    async loadBeeDieAssetsFinished()\n    {\n        preloadBeeDieAssets(function(progress){},function(){});\n    }\n\n}\n\n/**\n * Suspends the execution until the time-out interval elapses\n * @param {integer} ms Milliseconds to sleep\n */\nasync function sleep(ms) {\n    return new Promise(async (resolve) => {\n        await setTimeout(resolve, ms);\n    })\n}\n\n\n// WEBPACK FOOTER //\n// ./src/game.js","\"use strict\"\nimport { canvas, Core, halfCanvasHeight, halfCanvasWidth, scale ,beeDiePageAssetsPath} from './core'\nconst { drawRect, drawImage, drawText, drawCircle, drawLine, sleep, drawBlock,drawImage2 } = Core;\nimport $ from  'jquery';\n\n/**\n * Credits page class\n */\nexport default class Play {\n\n\tCIRCLE_RADIUS = 10;\n\tCIRCLE_DIAMETER = this.CIRCLE_RADIUS * 2\n\tLINE_WIDTH = 3;\n\tBLOCK_MARGIN = 1\n\tSPEED = 9//游戏速度\n\n\tframesPerSecond = 60;\n\tstartAnimationEnded = false;\n\tlastAddedTime = 0;\n\tlastBlockCollisionTime = 0;\n\trestartLabelTime = 0;\n\trestart = false;\n\n\tlistenersApplied = false;\n\tlastCoordinateX = 0;\n\tdistanceToX = 0;\n\tswipeDirection = '';\n\n\tscore = 0\n\tend = false\n\tpause = false\n\tnewBestScore = false\n\tbestScore = 0\n\tblocked = false\n\tcircles = []\n\tcols = []\n\tpoints = []\n\tblocks = []\n\tlines = []\n\tfinish = 0;//终点的线y值\n\thitBlock = null\n\trestartOpacity = 0\n\treverseOpacity = false\n\tdieBeeFlag = false;\n\tdieBeeFlag2 = true;\n\tfinishFlag = false;\n\tgameOver;\n\n\tavailableCircle = {\n\t\tx: 0,\n\t\ty: 0,\n\t\tvalue: 4\n\t}\n\n\tfinishGame() {\n\t\tif(this.finishFlag){\n\t\t\tthis.finish = this.finish + this.SPEED * scale;\n\t\t\tif(this.finish>1841){\n\t\t\t\tthis.end = true;\n\t\t\t}\n\t\t\tdrawImage(\n\t\t\t\t0,\n\t\t\t\tthis.finish,\n\t\t\t\t'static/assets/finishLine.png',\n\t\t\t\tcanvas.width,\n\t\t\t\tcanvas.width / 8.486\n\t\t\t)\n\t\t}\n\t}\n\tdraw() {\n\t\t// console.log(111);\n\t\t//drawRect(0, 0, canvas.width, canvas.height, 'black')\n\t\t//绘制背景\n\t\tdrawImage(\n            0,\n            0,\n            'static/assets/bg.png',\n\t\t\tcanvas.width,\n\t\t\tcanvas.height\n\t\t)\n\t\t\n\t\t\n\n\t\t// Falling blocks\n\t\t//创建障碍方块\n\t\tfor (const block of this.blocks) {\n\n\t\t\tif(block.value > 0) {\n\t\t\t\t// drawBlock(block.x, block.y, block.size, block.color)\n\t\t\t\tdrawImage(block.x,block.y,'static/assets/fk1.png', block.size, block.size)\n\n\t\t\t\tdrawText(\n\t\t\t\t\tblock.x + ((block.size / 2) - (block.value > 9 ? (10 * scale) : (6 * scale))),\n\t\t\t\t\tblock.y + (block.size / 2) + (7 * scale),\n\t\t\t\t\t22 * scale,\n\t\t\t\t\t'black',\n\t\t\t\t\t'Montserrat-Regular',\n\t\t\t\t\tblock.value\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\n\t\t// for(const line of this.lines) {\n\t\t// \tdrawLine(line.xStart, line.yStart, line.xEnd, line.yEnd, line.lineWidth, line.color)\n\t\t// }\n\n\t\t// Falling points\n\t\tfor (const point of this.points) {\n\n\t\t\t// drawCircle(\n\t\t\t// \tpoint.x,\n\t\t\t// \tpoint.y,\n\t\t\t// \tthis.CIRCLE_RADIUS * scale,\n\t\t\t// \t`rgb(255, 204, 0)`\n\t\t\t// )\n\t\t\tdrawImage(\n\t\t\t\tpoint.x,\n\t\t\t\tpoint.y,\n\t\t\t\t'static/assets/count.png',\n\t\t\t\t250,\n\t\t\t\t250\n\t\t\t)\n\n\t\t\tdrawText(\n\t\t\t\tpoint.x + 50 * scale,\n\t\t\t\tpoint.y + 75 * scale,\n\t\t\t\t40 * scale,\n\t\t\t\t'black',\n\t\t\t\t'Montserrat-Regular',\n\t\t\t\tpoint.value\n\t\t\t)\n\t\t}\n\n\t\tif (this.end === true) {\n\t\t\tdrawImage(\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\t'static/assets/bg.png',\n\t\t\t\tcanvas.width,\n\t\t\t\tcanvas.height\n\t\t\t)\n\n\t\t\tif(this.finishFlag){\n\t\t\t\t//绘制首页头顶\n\t\t\t\tdrawImage(\n\t\t\t\t\t0,\n\t\t\t\t\t0,\n\t\t\t\t\t'static/assets/finishTitle.png',\n\t\t\t\t\tcanvas.width,\n\t\t\t\t\tcanvas.width / 4.697\n\t\t\t\t)\n\t\t\t}else{\n\t\t\t\tclearInterval(this.gameOver);\n\t\t\t\t//绘制首页头顶\n\t\t\t\tdrawImage(\n\t\t\t\t\t0,\n\t\t\t\t\t0,\n\t\t\t\t\t'static/assets/p1-t1.png',\n\t\t\t\t\tcanvas.width,\n\t\t\t\t\tcanvas.width / 2.072\n\t\t\t\t)\n\t\t\t}\n\t\t\t$(\".beeBox\").fadeIn(500)\n\n\t\t} else {\n\t\t\t// if(this.dieBeeFlag2){\n\t\t\t\t\t// Current player available points\n\t\t\t\tdrawText(\n\t\t\t\t\tthis.availableCircle.x + 88,\n\t\t\t\t\tthis.availableCircle.y + 30,\n\t\t\t\t\t30 * scale,\n\t\t\t\t\t'#ffd29a',\n\t\t\t\t\t'Montserrat-Regular',\n\t\t\t\t\tthis.availableCircle.value\n\t\t\t\t)\n\t\t\t\t//标记蜜蜂头\n\t\t\t\tlet bee = 0;\n\t\t\t\t\n\t\t\t\t// Current player available points line\n\t\t\t\tfor (const circle of this.circles) {\n\t\t\t\t\t// drawCircle(\n\t\t\t\t\t// \tcircle.x,\n\t\t\t\t\t// \tcircle.y,\n\t\t\t\t\t// \tthis.CIRCLE_RADIUS * scale,\n\t\t\t\t\t// \t`rgb(255, 204, 0)`\n\t\t\t\t\t// )\n\t\t\t\t\tif(bee == 0){\n\t\t\t\t\t\tdrawImage(\n\t\t\t\t\t\t\tcircle.x - 50,\n\t\t\t\t\t\t\tcircle.y - 50,\n\t\t\t\t\t\t\t'static/assets/bee.png',\n\t\t\t\t\t\t\t300,\n\t\t\t\t\t\t\t300\n\t\t\t\t\t\t)\n\t\t\t\t\t\tdrawImage(\n\t\t\t\t\t\t\tcircle.x + 86,\n\t\t\t\t\t\t\tcircle.y + 200,\n\t\t\t\t\t\t\t'static/assets/ball.png',\n\t\t\t\t\t\t\t30,\n\t\t\t\t\t\t\t30\n\t\t\t\t\t\t)\n\t\t\t\t\t\tbee++;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tdrawImage(\n\t\t\t\t\t\t\tcircle.x + 86,\n\t\t\t\t\t\t\tcircle.y + 200,\n\t\t\t\t\t\t\t'static/assets/ball.png',\n\t\t\t\t\t\t\t30,\n\t\t\t\t\t\t\t30\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\t// console.log(circle.y)\n\t\t\t\t\t\n\t\t\t\t}\n\n\t\t\t\t//创建分数的背景\n\t\t\t\t// drawImage(\n\t\t\t\t// \t0,\n\t\t\t\t// \t0,\n\t\t\t\t// \t'static/assets/score.png',\n\t\t\t\t// \tcanvas.width,\n\t\t\t\t// \tcanvas.width / 4.286\n\t\t\t\t// )\n\n\t\t\t\t// drawText(\n\t\t\t\t// \thalfCanvasWidth - (45 * scale),\n\t\t\t\t// \t23 * scale,\n\t\t\t\t// \t20 * scale,\n\t\t\t\t// \t'white',\n\t\t\t\t// \t'Montserrat-Regular',\n\t\t\t\t// \t'分数: '+this.score * 10\n\t\t\t\t// )\n\t\t\t}\n\t\t// }\n\t\n\t\n\t}\n\n\tgetBlockColor(blockValue) {\n\n\t\tconst currentPoints = this.availableCircle.value;\n\n\t\tif(blockValue === 1) {\n\t\t\treturn '#69F0AE'\n\t\t} else if(blockValue <= 4) {\n\t\t\treturn '#00E676'\n\t\t} else if(blockValue <= 8) {\n\t\t\treturn '#00C853'\n\t\t} else if (blockValue <= 12) {\n\t\t\treturn '#FFD54F'\n\t\t} else if(blockValue <= 16) {\n\t\t\treturn '#FFCA28'\n\t\t} else if(blockValue <= 20) {\n\t\t\treturn '#FF8F00'\n\t\t} else if(blockValue >= 21) {\n\t\t\treturn '#D84315'\n\t\t}\n\t}\n\n\taddLines() {\n\n\t\tif (this.blocked || this.end || this.pause) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst blockSize = (canvas.width / 5)\n\t\tconst numberOfLine = (Math.random() * 3) + 1\n\t\tconst lineHeight = Math.floor(Math.random() * (blockSize * 2)) + blockSize\n\t\tconst key = Math.floor(Math.random() * ((this.blocks.length - 1) - (this.blocks.length - 5) + 1) + (this.blocks.length - 5));\n\t\tconst randomBlock = this.blocks[key]\n\n\n\t\tfor(let i = 0; i < numberOfLine; i++) {\n\n\t\t\tconst x = (randomBlock.x + blockSize) - (this.LINE_WIDTH / 2)\n\t\t\t\n\t\t\tthis.lines.push({\n\t\t\t\txStart: x,\n\t\t\t\tyStart: (randomBlock.y + blockSize) - (4 * scale),\n\t\t\t\txEnd: x,\n\t\t\t\tyEnd: (randomBlock.y + blockSize) + lineHeight,\n\t\t\t\tlineWidth: this.LINE_WIDTH * scale,\n\t\t\t\tcolor: 'white'\n\t\t\t})\n\t\t}\n\t}\n\n\tupdateLines() {\n\t\tif(this.end || this.pause || this.blocked) {\n\t\t\treturn false\n\t\t}\n\t\t\n\t\tfor(const line of this.lines) {\n\t\t\tline.yStart += this.SPEED * scale\n\t\t\tline.yEnd += this.SPEED * scale\n\t\t}\n\t}\n\n\taddBlocks() {\n\n\t\tif (this.blocked || this.end || this.pause) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst margin = (this.BLOCK_MARGIN * scale)\n\t\tconst blockSize = (canvas.width / 8)\n\n\t\tfor (let i = 0; i < 8; i++) {\n\n\t\t\tlet x;\n\n\t\t\tif (i === 0) {\n\t\t\t\tx = margin\n\t\t\t} else {\n\t\t\t\tx = margin + (blockSize * i)\n\t\t\t}\n\n\t\t\tconst value = Math.floor(Math.random() * (this.availableCircle.value * 2)) + 1\n\n\t\t\tthis.blocks.push({\n\t\t\t\tx: x,\n\t\t\t\ty: -(blockSize * 4),\n\t\t\t\tsize: blockSize - (margin * 2),\n\t\t\t\tvalue: value,\n\t\t\t\tcolor: this.getBlockColor(value)\n\t\t\t})\n\t\t}\n\n\t\tthis.addLines();\n\n\t}\n\n\tupdateBlocks() {\n\n\t\tif(this.end || this.pause) {\n\t\t\treturn false\n\t\t}\n\n\t\t// First check for collision\n\t\tfor (const block of this.blocks) {\n\n\t\t\tconst blockBottomPosition = block.y + block.size\n\t\t\tconst blockMargin = this.BLOCK_MARGIN * scale\n\t\t\tconst playerX = this.circles[0].x;\n\t\t\tconst playerY = this.circles[0].y;\n\n\t\t\tif (blockBottomPosition >= (playerY - (this.CIRCLE_DIAMETER + 1))\n\t\t\t\t&& blockBottomPosition <= (playerY + this.CIRCLE_DIAMETER)\n\t\t\t) {\n\t\t\t\t// console.log(\n\t\t\t\t// \tplayerX > (block.x - blockMargin)\n\t\t\t\t// \t&& playerX < ((block.x - blockMargin) + (block.size + blockMargin))\n\t\t\t\t// )\n\t\t\t\t// console.log('a='+playerX);\n\t\t\t\t// console.log('b='+(block.x - blockMargin));\n\t\t\t\t// console.log('c='+((block.x - blockMargin) + (block.size + blockMargin)));\n\t\t\t\t// Collision X\n\t\t\t\tif (playerX >= (block.x - blockMargin)\n\t\t\t\t\t&& playerX <= ((block.x - blockMargin) + (block.size + blockMargin))\n\t\t\t\t) {\n\t\n\t\t\t\t\tif (block.value > 0) {\n\t\t\t\t\t\tthis.blocked = true\n\t\t\t\t\t\tthis.hitBlock = block\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.blocked = false\n\t\t\t\t\t\tthis.hitBlock = null\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Update blocks position and handle blocks to remove\n\t\tif (!this.blocked) {\n\n\t\t\tthis.blocks = this.blocks.reduce((previous, block, key) => {\n\n\t\t\t\t// Remove the block from the array when outside of canvas\n\t\t\t\tif (block.y >= canvas.height) {\n\t\t\t\t\treturn previous;\n\t\t\t\t}\n\n\t\t\t\t// Remove the block from the array if value is 0\n\t\t\t\tif (block.value === 0) {\n\t\t\t\t\treturn previous\n\t\t\t\t}\n\n\t\t\t\tlet { y, ...props } = block\n\n\t\t\t\treturn previous.concat([{\n\t\t\t\t\ty: y += (this.SPEED * scale),\n\t\t\t\t\t...props\n\t\t\t\t}])\n\n\t\t\t}, []);\n\t\t}\n\t}\n\n\tupdateCircles() {\n\n\t\t// Value was not set yet\n\t\tif(this.lastCoordinateX === 0 || this.circles.length === 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif(this.lastCoordinateX >= 0 + this.CIRCLE_RADIUS && this.lastCoordinateX <= canvas.width - this.CIRCLE_RADIUS) {\n\n\t\t\tconst playerX = this.circles[0].x + this.CIRCLE_RADIUS;\n\t\t\tconst playerY = this.circles[0].y;\n\n\t\t\tlet lineCollision = this.lines.some((line) => {\n\t\t\t\treturn playerY >= line.yStart && playerY <= line.yEnd\n\t\t\t\t&& playerX >= line.xStart && playerX <= line.xStart + (this.LINE_WIDTH * scale)\n\t\t\t})\n\n\t\t\tif(!lineCollision) {\n\t\t\t\tthis.circles[0].x = this.lastCoordinateX\n\t\t\t\tthis.availableCircle.x = this.lastCoordinateX - 10\n\t\t\t}\n\t\t}\n\n\t\tfor(var i = 1; i < this.circles.length; i++) {\n\n\t\t\tconst circle = this.circles[i],\n\t\t\t\tprev = this.circles[i - 1],\n\t\t\t\tdistance = Math.sqrt((circle.x - prev.x) * (circle.x - prev.x)),\n\t\t\t\tspeed = Math.abs(circle.x - prev.x) / (2 * scale);\n\t\t\t\tcircle.y = prev.y + (this.CIRCLE_DIAMETER * scale);\n\t\t\t\n\t\t\tif(distance < speed) {\n\t\t\t\tcircle.x = prev.x;\n\t\t\t}\n\t\t\telse if(circle.x > prev.x && (circle.x - speed) >= 0) {\n\t\t\t\tcircle.x -= speed;\n\t\t\t}\n\t\t\telse if(circle.x < prev.x && (circle.x - speed) <= canvas.width) {\n\t\t\t\tcircle.x += speed;\n\t\t\t}     \n\t\t}\n\t}\n\n\t/**\n\t * Called every 500ms when player was colliding with a block\n\t * 当玩家与一个块碰撞时，每500毫秒调用一个\n\t */\n\thandleBlockCollision() {\n\t\tif (this.hitBlock !== null && this.hitBlock.value > 0 && this.availableCircle.value > 0) {\n\t\t\tthis.hitBlock.value -= 1\n\t\t\tthis.hitBlock.color = this.getBlockColor(this.hitBlock.value)\n\t\t\tthis.availableCircle.value -= 1\n\n\t\t\tif(this.availableCircle.value === 0 && !this.end) {\n\t\t\t\tthis.end = true\n\t\t\t\twindow.cancelAnimationFrame(this.play_animation)\n\n\t\t\t\t//绘制蜜蜂死亡\n\t\t\t\t// this.dieBeeFlag2 = false;\n\t\t\t\t// var n = 0;//帧数\n\t\t\t\t// function drawAni(){\n\t\t\t\t// \tdrawImage(\n\t\t\t\t// \t\t0,\n\t\t\t\t// \t\t0,\n\t\t\t\t// \t\t'static/assets/bg.png',\n\t\t\t\t// \t\tcanvas.width,\n\t\t\t\t// \t\tcanvas.height\n\t\t\t\t// \t)\n\t\t\t\t// \tn++;\n\t\t\t\t// }\n\n\t\t\t\t// var ani = setInterval(function(){\n\t\t\t\t// \tif(n>23){\n\t\t\t\t// \t\tthis.dieBeeFlag = true;\n\t\t\t\t// \t\tclearInterval(ani);\n\t\t\t\t// \t}else{\n\t\t\t\t// \t\tdrawAni();\n\t\t\t\t// \t\tconsole.log(n);\n\t\t\t\t// \t\tconsole.log(beeDiePageAssetsPath[n]);\n\t\t\t\t// \t}\n\t\t\t\t\t\n\t\t\t\t// }.bind(this),1000/20)\n\n\t\t\t\t\n\t\t\t\t//结束\n\t\t\t\tcanvas.removeEventListener(\"touchmove\", this.onTouch);\n\t\t\t\t//scanvas.addEventListener(\"touchstart\", this.onTouch);\n\n\t\t\t\tif(this.bestScore === 0 || this.score * 10 > this.bestScore) {\n\t\t\t\t\tthis.newBestScore = true\n\t\t\t\t\tthis.bestScore = this.score\n\t\t\t\t}\n\n\t\t\t\twindow.requestAnimationFrame(this.restartLabelAnimation)\n\t\t\t}\n\n\t\t\tthis.circles.pop()\n  \n\t\t}\n\t}\n\n\t/**\n\t * Add points on hidden the top of the canvas\n\t */\n\taddPoints() {\n\n\t\tif (this.blocked || this.end || this.pause) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst numberOfPoints = Math.floor(Math.random() * 3) + 1\n\n\t\tfor (var i = 0; i < numberOfPoints; i++) {\n\t\t\tthis.points.push({\n\t\t\t\tx: this.cols[i],\n\t\t\t\ty: -200,\n\t\t\t\tvalue: Math.floor(Math.random() * 5) + 1\n\t\t\t})\n\t\t}\n\t}\n\n\t/**\n\t * Update points y position and remove points with \n\t * y position upper than canvas height\n\t */\n\tupdatePoints() {\n\n\t\tif (this.blocked || this.end || this.pause) {\n\t\t\treturn false\n\t\t}\n\n\t\tthis.points = this.points.reduce((previous, point) => {\n\n\t\t\t// Check if the points y position are upper than canvas height\n\t\t\tif (point.y < (halfCanvasHeight * 2)) {\n\n\t\t\t\t// Collision with points点碰撞的事件\n\t\t\t\tif (point.y > (this.availableCircle.y - 40) && point.y < this.availableCircle.y + 40\n\t\t\t\t\t&& point.x > (this.availableCircle.x - 120) && point.x < this.availableCircle.x + 80\n\t\t\t\t) {\n\n\t\t\t\t\t// Adding points as circles on the screen\n\t\t\t\t\tfor (let i = 0; i < point.value; i++) {\n\t\t\t\t\t\tconst lastCircle = this.circles[this.circles.length - 1];\n\n\t\t\t\t\t\tthis.circles.push({\n\t\t\t\t\t\t\tx: lastCircle.x,\n\t\t\t\t\t\t\ty: lastCircle.y + (20 * scale) \n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.availableCircle.value += point.value;\n\t\t\t\t\tthis.score += point.value;\n\n\t\t\t\t\treturn previous\n\t\t\t\t} else {\n\n\t\t\t\t\tif (!this.blocked) {\n\n\t\t\t\t\t\tlet { y, ...props } = point;\n\n\t\t\t\t\t\treturn previous.concat([{\n\t\t\t\t\t\t\ty: y + (this.SPEED * scale),\n\t\t\t\t\t\t\t...props\n\t\t\t\t\t\t}])\n\t\t\t\t\t}\n\t\t\t\t\treturn previous\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn previous\n\t\t}, [])\n\t}\n\n\t/**\n\t * When user leave the tab pause the game\n\t * 当用户离开标签暂停游戏\n\t */\n\tonTabFocusOff = () => {\n\t\tif(document.visibilityState === 'hidden') {\n\t\t\tthis.pause = true;\n\t\t} else {\n\t\t\tthis.pause = false;\n\t\t}\n\t}\n\n\t/**\n\t * When user swipe on the screen during the game\n\t * 当用户在游戏过程中在屏幕上滑动时\n\t */\n\tonTouch = async ({ changedTouches }) => {\n\t\tconst touch = changedTouches[0];\n\n\t\t// Called when the game was ended and touch the screen\n\t\tif(this.end) {\n\t\t\t// Remove all listeners and interval before showing the start screen\n\t\t\tthis.restart = true\n\t\t\tcanvas.removeEventListener(\"touchstart\", this.onTouch)\n\t\t\tdocument.removeEventListener(\"visibilitychange\", this.onTabFocusOff)\n\t\t\treturn this.showStartScreen(this.run.bind(this))\n\t\t}\n\n\t\t// First touch\n\t\tif (this.lastCoordinateX === 0) {\n\t\t\tthis.lastCoordinateX = Math.abs(halfCanvasWidth - touch.pageX) * scale\n\t\t\treturn false\n\t\t}\n\n\t\tthis.distanceToX = Math.abs(this.lastCoordinateX - touch.pageX) * scale\n\t\tthis.swipeDirection = (this.lastCoordinateX > touch.pageX ? 'left' : 'right');\n\t\tthis.lastCoordinateX = touch.pageX * scale\n\t}\n\n\tapplyListeners() {\n\t\tthis.listenersApplied = true;\n\t\tcanvas.addEventListener(\"touchmove\", this.onTouch, false);\n\t\tdocument.addEventListener(\"visibilitychange\", this.onTabFocusOff);\n\t}\n\n\trestartLabelAnimation = (timestamp) => {\n\n\t\tif(!this.end || this.restart) {\n\t\t\treturn false\n\t\t}\n\n\t\tif(!this.restartLabelTime || this.restartLabelTime - this.restartLabelTime <= 100) {\n\t\t\tthis.restartLabelTime = timestamp;\n\n\t\t\tconst opacity = parseFloat(this.restartOpacity.toFixed(2));\n\n\t\t\tif(opacity <= 1 && !this.reverseOpacity) {\n\t\t\t\tthis.restartOpacity += 0.04\n\t\t\t\tif(opacity === 1) {\n\t\t\t\t\tthis.reverseOpacity = !this.reverseOpacity\n\t\t\t\t}\n\t\t\t} else if(opacity >= 0 && this.reverseOpacity) {\n\t\t\t\tthis.restartOpacity -= 0.04\n\t\t\t\tif(opacity === 0) {\n\t\t\t\t\tthis.reverseOpacity = !this.reverseOpacity\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.draw()\n\t\t\twindow.requestAnimationFrame(this.restartLabelAnimation)\n\t\t}\n\t}\n\n\t/**\n\t * Animation of circles before be able to play\n\t * 动画的圆形才能播放\n\t */\n\tbeforePlayAnimation = () => {\n\n\t\tconst startYPosition = halfCanvasHeight + (canvas.height / 6);\n\n\t\tif (this.circles[0].y > (startYPosition - (50 * scale))) {\n\n\t\t\tthis.availableCircle.y -= (6 * scale)\n\t\t\tthis.circles.map((circle, key) => {\n\t\t\t\tcircle.y -= (5 * scale) - ((2 * scale) * key)\n\t\t\t})\n\n\t\t\tthis.draw()\n\n\t\t\twindow.requestAnimationFrame(this.beforePlayAnimation)\n\t\t} else {\n\t\t\tthis.startAnimationEnded = true\n\t\t\tthis.applyListeners()\n\t\t\twindow.cancelAnimationFrame(this.before_play_animation)\n\t\t}\n\t}\n\n\t/**\n\t * Animation during the game session\n\t * 游戏过程中的动画\n\t * @param {number} timestamp \n\t */\n\tplayAnimation = (timestamp) => {\n\n\t\tif(this.startAnimationEnded === false || this.pause === true) {\n\t\t\treturn window.requestAnimationFrame(this.playAnimation)\n\t\t}\n\n\t\tif (!this.end) {\n\n\t\t\tif(!this.lastAddedTime && ! this.lastBlockCollisionTime) {\n\t\t\t\tthis.lastAddedTime = this.lastBlockCollisionTime =  timestamp\n\t\t\t\tthis.addPoints();\n\t\t\t\tthis.addBlocks();\n\t\t\t} else {\n\n\t\t\t\tif(timestamp - this.lastAddedTime >= 2000) {\n\t\t\t\t\t// Each 1,5s add points and blocks\n\t\t\t\t\tthis.addBlocks();\n\t\t\t\t\tthis.addPoints();\n\t\t\t\t\tthis.lastAddedTime = timestamp;\n\t\n\t\t\t\t} else if(timestamp - this.lastBlockCollisionTime >= 100) {\n\t\t\t\t\t// Each 100ms handle block collision\n\t\t\t\t\tif(this.blocked) {\n\t\t\t\t\t   this.handleBlockCollision() \n\t\t\t\t\t}\n\t\t\t\t\tthis.lastBlockCollisionTime = timestamp\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.updateCircles()\n\t\t\tthis.updateBlocks()\n\t\t\tthis.updatePoints()\n\t\t\tthis.updateLines()\n\t\t\tthis.draw()\n\t\t\tthis.finishGame()\n\t\t\t\n\n\t\t\twindow.requestAnimationFrame(this.playAnimation)\n\t\t} else {\n\t\t\tthis.draw()\n\t\t}\n\t}\n\n\n\t/**\n\t * Run the game\n\t */\n\tasync run(showStartScreen) {\n\n\t\tthis.showStartScreen = showStartScreen\n\n\t\t// Reset values\n\t\tthis.startAnimationEnded = false\n\t\tthis.listenersApplied = false\n\t\tthis.lastAddedTime = 0\n\t\tthis.lastBlockCollisionTime = 0\n\t\tthis.restartLabelTime = 0\n\t\tthis.restart = false;\n\t\tthis.availableCircle.x = halfCanvasWidth - (3 * scale)\n\t\tthis.availableCircle.y = (halfCanvasHeight + (canvas.height / 6)) - 20\n\t\tthis.availableCircle.value = 4\n\t\tthis.restartOpacity = 0\n\t\tthis.reverseOpacity = false\n\t\tthis.blocks = []\n\t\tthis.points = []\n\t\tthis.circles = []\n\t\tthis.cols = []\n\t\tthis.pause = false\n\t\tthis.blocked = false\n\t\tthis.hitBlock = null\n\t\tthis.end = false\n\t\tthis.finish = 0;\n\t\tthis.finishFlag = false;\n\t\tthis.lastCoordinateX = 0\n\t\t//分数重置\n\t\tthis.score = 0;\n\t\tthis.dieBeeFlag = false;\n\t\tthis.dieBeeFlag2 = true;\n\t\tthis.gameOver = setTimeout(function(){\n\t\t\tthis.finishFlag = true;\n\t\t\t//this.end = true;\n\t\t\t// console.log(this.end)\n\t\t}.bind(this),20000)\n\n\t\tconst defaultX = halfCanvasWidth\n\t\tconst defaultY = halfCanvasHeight + (canvas.height / 6)\n\n\t\tfor (let i = 0; i < this.availableCircle.value; i++) {\n\t\t\tthis.circles.push({ x: defaultX, y: defaultY })\n\t\t}\n\n\t\tif(localStorage.key('bestScore') !== null) {\n\t\t\tconst bestScore = localStorage.getItem('bestScore');\n\t\t\tif(bestScore) {\n\t\t\t\tthis.bestScore = parseInt(bestScore);\n\t\t\t} else {\n\t\t\t\tthis.bestScore = 0;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.bestScore = 0;\n\t\t}\n\n\t\t// Initialization of columns for points position\n\t\tconst oneColWith = halfCanvasWidth / 2;\n\t\tfor(let i = 1; i <= 5; i++) {\n\t\t\tthis.cols.push(oneColWith * i)\n\t\t}\n\n\t\t// Draw the circle of the start screen\n\t\tthis.draw()\n\n\t\tthis.before_play_animation = window.requestAnimationFrame(this.beforePlayAnimation)\n\t\tthis.play_animation = window.requestAnimationFrame(this.playAnimation)\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/play.js","\"use strict\"\n\nimport { canvas, Core, halfCanvasHeight, halfCanvasWidth, scale, tutorialPageAssetsPath } from './core'\nconst { drawRect, drawImage, drawText, drawCircle , loadImg } = Core;\nimport $ from  'jquery';\n\n/**\n * Credits page class\n */\nexport default class Start {\n\n    framesPerSecond = 60;\n    startInstructionOpacity = 0;\n    reverseOpacity = false;\n    useTouch = false;\n    bestScore = 0;\n\n    LIGHT_FONT_SIZE = 33\n    BOLD_FONT_SIZE = 48\n    CIRCLE_RADIUS = 10\n    FirstFlag = true;\n    ani;\n\n    draw() {\n        //console.log('draw')\n        // Background\n        // drawRect(0, 0, canvas.width, canvas.height, 'black')\n        // drawImage(\n        //     0,\n        //     0,\n        //     'static/assets/bg.png',\n\t\t// \tcanvas.width,\n\t\t// \tcanvas.height\n        // )\n\n        // //绘制首页头顶\n        // drawImage(\n        //     0,\n        //     0,\n        //     'static/assets/p1-t1.png',\n\t\t// \tcanvas.width,\n\t\t// \tcanvas.width / 1.953\n        // )\n\n        // //绘制那只大蜜蜂\n        // drawImage(\n        //     canvas.width * 0.1,\n        //     canvas.height * 0.23,\n        //     'static/assets/p1-t2.png',\n        //     canvas.width * 0.8,\n        //     canvas.width * 0.8 / 0.802\n        // )\n            \n        // drawText(\n        //     halfCanvasWidth - (50*scale), \n        //     halfCanvasHeight - (55*scale) - (canvas.height/4), \n        //     this.LIGHT_FONT_SIZE * scale, \n        //     'white', \n        //     'Montserrat-Thin', \n        //     'Snake'\n        // )\n        // drawText(\n        //     halfCanvasWidth - (35*scale), \n        //     halfCanvasHeight - (canvas.height/4), \n        //     this.BOLD_FONT_SIZE * scale, \n        //     'white', \n        //     'Montserrat-Regular', \n        //     'VS'\n        // )\n        // drawText(\n        //     halfCanvasWidth - (45*scale), \n        //     halfCanvasHeight + (45 * scale) - (canvas.height/4), \n        //     this.LIGHT_FONT_SIZE * scale, \n        //     'white', \n        //     'Montserrat-Thin', \n        //     'Block'\n        // )\n\n        // if(this.bestScore > 0) {\n        //     drawText(\n        //         halfCanvasWidth - (40 * scale), \n        //         halfCanvasHeight - (halfCanvasHeight / 7), \n        //         16 * scale, \n        //         'white', \n        //         'Montserrat-Thin', \n        //         'Best score :'\n        //     )\n\n        //     drawText(\n        //         halfCanvasWidth - ((this.bestScore > 9 ? 20 : 10) * scale), \n        //         halfCanvasHeight + (10 * scale), \n        //         this.LIGHT_FONT_SIZE * scale, \n        //         'white', \n        //         'Montserrat-Regular', \n        //         this.bestScore\n        //     )\n        // }\n\n        // Start instruction text\n        // drawText(\n        //     halfCanvasWidth - (55 * scale), \n        //     halfCanvasHeight + (canvas.height/3), \n        //     22 * scale, \n        //     `rgba(255, 255, 255, ${this.startInstructionOpacity.toFixed(2)})`, \n        //     'Montserrat-Thin', \n        //     'Tap to play'\n        // );\n\n        // drawText(\n        //     halfCanvasWidth - (4*scale), \n        //     (halfCanvasHeight + canvas.height/6) - (20*scale),\n        //      14 * scale, \n        //      'white', \n        //      'Montserrat-Regular', \n        //      '4')\n\n        // drawCircle(\n        //     halfCanvasWidth, \n        //     halfCanvasHeight + canvas.height/6, \n        //     this.CIRCLE_RADIUS * scale, \n        //     `rgb(255, 204, 0)`\n        // );\n    }\n\n    /**\n     * Show the start state\n     */\n    show(runGame) {\n\n        this.runGame = runGame\n\n        // canvas.addEventListener(\"touchstart\", this.onTouch)\n        //canvas.addEventListener(\"mousedown\", this.onTouch)\n\n        // document.querySelector('.play').addEventListener(\"touchstart\", this.onTouch)\n        document.querySelector('.play').addEventListener(\"mousedown\", this.showTutorial)\n        //document.querySelector('.playAgain').addEventListener(\"mousedown\", this.onTouch)\n\n        // if(localStorage.key('bestScore') !== null) {\n        //     this.bestScore = localStorage.getItem('bestScore')\n        // }\n\n        // Start instruction text blinking\n        // this.instructionAnimation = setInterval(() => {\n            \n        //     const opacity = parseFloat(this.startInstructionOpacity.toFixed(2));\n\n        //     if(opacity <= 1 && !this.reverseOpacity) {\n        //         this.startInstructionOpacity += 0.04\n        //         if(opacity === 1) {\n        //             this.reverseOpacity = !this.reverseOpacity\n        //         }\n        //     } else if(opacity >= 0 && this.reverseOpacity) {\n        //         this.startInstructionOpacity -= 0.04\n        //         if(opacity === 0) {\n        //             this.reverseOpacity = !this.reverseOpacity\n        //         }\n        //     }\n\n        //     this.draw()\n        // }, 20)\n\n        this.draw()\n    }\n\n       //出现第一次的教程图片\n       showTutorial = () => {\n        drawImage(\n            0,\n            0,\n            'static/assets/tutorial.png',\n\t\t\tcanvas.width,\n\t\t\tcanvas.height\n        )\n        $(\".beeBox\").hide();\n        canvas.addEventListener(\"mousedown\", this.onTouch)\n        document.querySelector('.play').removeEventListener(\"mousedown\", this.showTutorial)\n        document.querySelector('.play').addEventListener(\"mousedown\", this.onTouch)\n    }\n\n    onTouch = (evt) => {\n        $(\".beeBox\").hide();\n        $(\".palyAgainBox\").hide();\n        if(this.FirstFlag){\n            var n = 0;//帧数\n            \n            \n            function drawAni(){\n                drawImage(\n                    0,\n                    0,\n                    tutorialPageAssetsPath[n],\n                    canvas.width,\n                    canvas.height\n                )\n                n++;\n            }\n\n            this.ani = setInterval(function(){\n                if(n>208){\n                    clearInterval(this.ani);\n                }else{\n                    drawAni();\n                }\n                console.log(n)\n            }.bind(this),1000/20)\n            canvas.addEventListener(\"mousedown\", this.onTouch)\n            this.FirstFlag = false;\n        }else{\n            evt.preventDefault();\n            clearInterval(this.ani);\n            if(evt.type === 'touchstart') {\n                this.useTouch = true\n            }\n\n            if (evt.type === \"touchend\" || evt.type === \"mousedown\" && this.useTouch === true) {\n                return false;\n            }\n\n            clearInterval(this.instructionAnimation);\n            canvas.removeEventListener(\"touchstart\", this.onTouch)\n            canvas.removeEventListener(\"mousedown\", this.onTouch)\n\n            this.runGame(this.show.bind(this))\n        }\n        \n      }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/start.js","module.exports = require(\"babel-runtime/regenerator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/regenerator\"\n// module id = babel-runtime/regenerator\n// module chunks = 2","module.exports = require(\"jquery\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jquery\"\n// module id = jquery\n// module chunks = 2","module.exports = require(\"next/head\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"next/head\"\n// module id = next/head\n// module chunks = 2","module.exports = require(\"preloader\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"preloader\"\n// module id = preloader\n// module chunks = 2","module.exports = require(\"react\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react\"\n// module id = react\n// module chunks = 2","module.exports = require(\"styled-jsx/style\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"styled-jsx/style\"\n// module id = styled-jsx/style\n// module chunks = 2"],"sourceRoot":""}