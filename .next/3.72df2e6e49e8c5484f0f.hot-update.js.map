{"version":3,"sources":["webpack:///./src/play.js?66f3"],"names":["drawRect","drawImage","drawText","drawCircle","drawLine","sleep","drawBlock","drawImage2","Play","CIRCLE_RADIUS","CIRCLE_DIAMETER","LINE_WIDTH","BLOCK_MARGIN","SPEED","framesPerSecond","startAnimationEnded","lastAddedTime","lastBlockCollisionTime","restartLabelTime","restart","listenersApplied","lastCoordinateX","distanceToX","swipeDirection","score","end","pause","newBestScore","bestScore","blocked","circles","cols","points","blocks","lines","finish","hitBlock","restartOpacity","reverseOpacity","dieBeeFlag","dieBeeFlag2","finishFlag","availableCircle","x","y","value","onTabFocusOff","document","visibilityState","onTouch","changedTouches","touch","canvas","removeEventListener","showStartScreen","run","bind","Math","abs","halfCanvasWidth","pageX","restartLabelAnimation","timestamp","opacity","parseFloat","toFixed","draw","window","requestAnimationFrame","beforePlayAnimation","startYPosition","halfCanvasHeight","height","map","circle","key","applyListeners","cancelAnimationFrame","before_play_animation","playAnimation","addPoints","addBlocks","handleBlockCollision","updateCircles","updateBlocks","updatePoints","updateLines","finishGame","width","block","color","size","point","clearInterval","gameOver","$","fadeIn","bee","blockValue","currentPoints","arr","blockSize","numberOfLine","random","lineHeight","floor","length","randomBlock","i","push","xStart","yStart","xEnd","yEnd","lineWidth","line","margin","getBlockColor","addLines","blockBottomPosition","blockMargin","playerX","playerY","reduce","previous","props","concat","scale","lineCollision","some","prev","distance","sqrt","speed","play_animation","pop","numberOfPoints","lastCircle","addEventListener","setTimeout","defaultX","defaultY","localStorage","getItem","parseInt","oneColWith"],"mappings":"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","file":"3.72df2e6e49e8c5484f0f.hot-update.js","sourcesContent":["\"use strict\"\nimport { canvas, Core, halfCanvasHeight, halfCanvasWidth, scale ,beeDiePageAssetsPath} from './core'\nconst { drawRect, drawImage, drawText, drawCircle, drawLine, sleep, drawBlock,drawImage2 } = Core;\nimport $ from  'jquery';\n\n/**\n * Credits page class\n */\nexport default class Play {\n\n\tCIRCLE_RADIUS = 10;\n\tCIRCLE_DIAMETER = this.CIRCLE_RADIUS * 2\n\tLINE_WIDTH = 3;\n\tBLOCK_MARGIN = 1\n\tSPEED = 9//游戏速度\n\n\tframesPerSecond = 60;\n\tstartAnimationEnded = false;\n\tlastAddedTime = 0;\n\tlastBlockCollisionTime = 0;\n\trestartLabelTime = 0;\n\trestart = false;\n\n\tlistenersApplied = false;\n\tlastCoordinateX = 0;\n\tdistanceToX = 0;\n\tswipeDirection = '';\n\n\tscore = 0\n\tend = false\n\tpause = false\n\tnewBestScore = false\n\tbestScore = 0\n\tblocked = false\n\tcircles = []\n\tcols = []\n\tpoints = []\n\tblocks = []\n\tlines = []\n\tfinish = 0;//终点的线y值\n\thitBlock = null\n\trestartOpacity = 0\n\treverseOpacity = false\n\tdieBeeFlag = false;\n\tdieBeeFlag2 = true;\n\tfinishFlag = false;\n\tgameOver;\n\n\tavailableCircle = {\n\t\tx: 0,\n\t\ty: 0,\n\t\tvalue: 4\n\t}\n\n\tfinishGame() {\n\t\tif(this.finishFlag){\n\t\t\tthis.finish = this.finish + this.SPEED * scale;\n\t\t\tif(this.finish>1841){\n\t\t\t\tthis.end = true;\n\t\t\t}\n\t\t\tdrawImage(\n\t\t\t\t0,\n\t\t\t\tthis.finish,\n\t\t\t\t'static/assets/finishLine.png',\n\t\t\t\tcanvas.width,\n\t\t\t\tcanvas.width / 8.486\n\t\t\t)\n\t\t}\n\t}\n\tdraw() {\n\t\t// console.log(111);\n\t\t//drawRect(0, 0, canvas.width, canvas.height, 'black')\n\t\t//绘制背景\n\t\tdrawImage(\n            0,\n            0,\n            'static/assets/bg.png',\n\t\t\tcanvas.width,\n\t\t\tcanvas.height\n\t\t)\n\t\t\n\t\t\n\n\t\t// Falling blocks\n\t\t//创建障碍方块\n\t\tfor (const block of this.blocks) {\n\n\t\t\tif(block.value > 0) {\n\t\t\t\t// drawBlock(block.x, block.y, block.size, block.color)\n\t\t\t\tdrawImage(block.x,block.y,block.color[0], block.size, block.size)\n\n\t\t\t\tdrawText(\n\t\t\t\t\tblock.x + ((block.size / 2) - (block.value > 9 ? (10 * scale) : (6 * scale))),\n\t\t\t\t\tblock.y + (block.size / 2) + (7 * scale),\n\t\t\t\t\t22 * scale,\n\t\t\t\t\tblock.color[1],\n\t\t\t\t\t'Montserrat-Regular',\n\t\t\t\t\tblock.value\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\n\t\t// for(const line of this.lines) {\n\t\t// \tdrawLine(line.xStart, line.yStart, line.xEnd, line.yEnd, line.lineWidth, line.color)\n\t\t// }\n\n\t\t// Falling points\n\t\tfor (const point of this.points) {\n\n\t\t\t// drawCircle(\n\t\t\t// \tpoint.x,\n\t\t\t// \tpoint.y,\n\t\t\t// \tthis.CIRCLE_RADIUS * scale,\n\t\t\t// \t`rgb(255, 204, 0)`\n\t\t\t// )\n\t\t\tdrawImage(\n\t\t\t\tpoint.x,\n\t\t\t\tpoint.y,\n\t\t\t\t'static/assets/count.png',\n\t\t\t\t250,\n\t\t\t\t250\n\t\t\t)\n\n\t\t\tdrawText(\n\t\t\t\tpoint.x + 50 * scale,\n\t\t\t\tpoint.y + 75 * scale,\n\t\t\t\t40 * scale,\n\t\t\t\t'black',\n\t\t\t\t'Montserrat-Regular',\n\t\t\t\tpoint.value\n\t\t\t)\n\t\t}\n\n\t\tif (this.end === true) {\n\t\t\tdrawImage(\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\t'static/assets/bg.png',\n\t\t\t\tcanvas.width,\n\t\t\t\tcanvas.height\n\t\t\t)\n\n\t\t\tif(this.finishFlag){\n\t\t\t\t//绘制首页头顶\n\t\t\t\tdrawImage(\n\t\t\t\t\t0,\n\t\t\t\t\t0,\n\t\t\t\t\t'static/assets/finishTitle.png',\n\t\t\t\t\tcanvas.width,\n\t\t\t\t\tcanvas.width / 4.518\n\t\t\t\t)\n\t\t\t}else{\n\t\t\t\tclearInterval(this.gameOver);\n\t\t\t\t//绘制首页头顶\n\t\t\t\tdrawImage(\n\t\t\t\t\t0,\n\t\t\t\t\t0,\n\t\t\t\t\t'static/assets/finishTitle-lose.png',\n\t\t\t\t\tcanvas.width,\n\t\t\t\t\tcanvas.width / 4.518\n\t\t\t\t)\n\t\t\t}\n\t\t\t$(\".beeBox\").fadeIn(500)\n\n\t\t} else {\n\t\t\t// if(this.dieBeeFlag2){\n\t\t\t\t\t// Current player available points\n\t\t\t\tdrawText(\n\t\t\t\t\tthis.availableCircle.x + 88,\n\t\t\t\t\tthis.availableCircle.y + 30,\n\t\t\t\t\t30 * scale,\n\t\t\t\t\t'#ffd29a',\n\t\t\t\t\t'Montserrat-Regular',\n\t\t\t\t\tthis.availableCircle.value\n\t\t\t\t)\n\t\t\t\t//标记蜜蜂头\n\t\t\t\tlet bee = 0;\n\t\t\t\t\n\t\t\t\t// Current player available points line\n\t\t\t\tfor (const circle of this.circles) {\n\t\t\t\t\t// drawCircle(\n\t\t\t\t\t// \tcircle.x,\n\t\t\t\t\t// \tcircle.y,\n\t\t\t\t\t// \tthis.CIRCLE_RADIUS * scale,\n\t\t\t\t\t// \t`rgb(255, 204, 0)`\n\t\t\t\t\t// )\n\t\t\t\t\tif(bee == 0){\n\t\t\t\t\t\tdrawImage(\n\t\t\t\t\t\t\tcircle.x - 50,\n\t\t\t\t\t\t\tcircle.y - 50,\n\t\t\t\t\t\t\t'static/assets/bee.png',\n\t\t\t\t\t\t\t300,\n\t\t\t\t\t\t\t300\n\t\t\t\t\t\t)\n\t\t\t\t\t\tdrawImage(\n\t\t\t\t\t\t\tcircle.x + 86,\n\t\t\t\t\t\t\tcircle.y + 200,\n\t\t\t\t\t\t\t'static/assets/ball.png',\n\t\t\t\t\t\t\t30,\n\t\t\t\t\t\t\t30\n\t\t\t\t\t\t)\n\t\t\t\t\t\tbee++;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tdrawImage(\n\t\t\t\t\t\t\tcircle.x + 86,\n\t\t\t\t\t\t\tcircle.y + 200,\n\t\t\t\t\t\t\t'static/assets/ball.png',\n\t\t\t\t\t\t\t30,\n\t\t\t\t\t\t\t30\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\t// console.log(circle.y)\n\t\t\t\t\t\n\t\t\t\t}\n\n\t\t\t\t//创建分数的背景\n\t\t\t\t// drawImage(\n\t\t\t\t// \t0,\n\t\t\t\t// \t0,\n\t\t\t\t// \t'static/assets/score.png',\n\t\t\t\t// \tcanvas.width,\n\t\t\t\t// \tcanvas.width / 4.286\n\t\t\t\t// )\n\n\t\t\t\t// drawText(\n\t\t\t\t// \thalfCanvasWidth - (45 * scale),\n\t\t\t\t// \t23 * scale,\n\t\t\t\t// \t20 * scale,\n\t\t\t\t// \t'white',\n\t\t\t\t// \t'Montserrat-Regular',\n\t\t\t\t// \t'分数: '+this.score * 10\n\t\t\t\t// )\n\t\t\t}\n\t\t// }\n\t\n\t\n\t}\n\n\tgetBlockColor(blockValue) {\n\n\t\tconst currentPoints = this.availableCircle.value;\n\n\t\t// if(blockValue === 1) {\n\t\t// \treturn '#69F0AE'\n\t\t// } else if(blockValue <= 4) {\n\t\t// \treturn '#00E676'\n\t\t// } else if(blockValue <= 8) {\n\t\t// \treturn '#00C853'\n\t\t// } else if (blockValue <= 12) {\n\t\t// \treturn '#FFD54F'\n\t\t// } else if(blockValue <= 16) {\n\t\t// \treturn '#FFCA28'\n\t\t// } else if(blockValue <= 20) {\n\t\t// \treturn '#FF8F00'\n\t\t// } else if(blockValue >= 21) {\n\t\t// \treturn '#D84315'\n\t\t// }\n\n\t\tif(blockValue>9){\n\t\t\tlet arr = [\n\t\t\t'static/assets/fk2.png',\n\t\t\t'white'\n\t\t\t]\n\t\t\treturn arr;\n\t\t}else{\n\t\t\tlet arr = [\n\t\t\t\t'static/assets/fk1.png',\n\t\t\t\t'black'\n\t\t\t\t]\n\t\t\t\treturn arr;\n\t\t}\n\t}\n\n\taddLines() {\n\n\t\tif (this.blocked || this.end || this.pause) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst blockSize = (canvas.width / 5)\n\t\tconst numberOfLine = (Math.random() * 3) + 1\n\t\tconst lineHeight = Math.floor(Math.random() * (blockSize * 2)) + blockSize\n\t\tconst key = Math.floor(Math.random() * ((this.blocks.length - 1) - (this.blocks.length - 5) + 1) + (this.blocks.length - 5));\n\t\tconst randomBlock = this.blocks[key]\n\n\n\t\tfor(let i = 0; i < numberOfLine; i++) {\n\n\t\t\tconst x = (randomBlock.x + blockSize) - (this.LINE_WIDTH / 2)\n\t\t\t\n\t\t\tthis.lines.push({\n\t\t\t\txStart: x,\n\t\t\t\tyStart: (randomBlock.y + blockSize) - (4 * scale),\n\t\t\t\txEnd: x,\n\t\t\t\tyEnd: (randomBlock.y + blockSize) + lineHeight,\n\t\t\t\tlineWidth: this.LINE_WIDTH * scale,\n\t\t\t\tcolor: 'white'\n\t\t\t})\n\t\t}\n\t}\n\n\tupdateLines() {\n\t\tif(this.end || this.pause || this.blocked) {\n\t\t\treturn false\n\t\t}\n\t\t\n\t\tfor(const line of this.lines) {\n\t\t\tline.yStart += this.SPEED * scale\n\t\t\tline.yEnd += this.SPEED * scale\n\t\t}\n\t}\n\n\taddBlocks() {\n\n\t\tif (this.blocked || this.end || this.pause) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst margin = (this.BLOCK_MARGIN * scale)\n\t\tconst blockSize = (canvas.width / 8)\n\n\t\tfor (let i = 0; i < 8; i++) {\n\n\t\t\tlet x;\n\n\t\t\tif (i === 0) {\n\t\t\t\tx = margin\n\t\t\t} else {\n\t\t\t\tx = margin + (blockSize * i)\n\t\t\t}\n\n\t\t\tconst value = Math.floor(Math.random() * (this.availableCircle.value * 2)) + 1\n\n\t\t\tthis.blocks.push({\n\t\t\t\tx: x,\n\t\t\t\ty: -(blockSize * 4),\n\t\t\t\tsize: blockSize - (margin * 2),\n\t\t\t\tvalue: value,\n\t\t\t\tcolor: this.getBlockColor(value)\n\t\t\t})\n\t\t}\n\n\t\tthis.addLines();\n\n\t}\n\n\tupdateBlocks() {\n\n\t\tif(this.end || this.pause) {\n\t\t\treturn false\n\t\t}\n\n\t\t// First check for collision\n\t\tfor (const block of this.blocks) {\n\n\t\t\tconst blockBottomPosition = block.y + block.size\n\t\t\tconst blockMargin = this.BLOCK_MARGIN * scale\n\t\t\tconst playerX = this.circles[0].x;\n\t\t\tconst playerY = this.circles[0].y;\n\n\t\t\tif (blockBottomPosition >= (playerY - (this.CIRCLE_DIAMETER + 1))\n\t\t\t\t&& blockBottomPosition <= (playerY + this.CIRCLE_DIAMETER)\n\t\t\t) {\n\t\t\t\t// console.log(\n\t\t\t\t// \tplayerX > (block.x - blockMargin)\n\t\t\t\t// \t&& playerX < ((block.x - blockMargin) + (block.size + blockMargin))\n\t\t\t\t// )\n\t\t\t\t// console.log('a='+playerX);\n\t\t\t\t// console.log('b='+(block.x - blockMargin));\n\t\t\t\t// console.log('c='+((block.x - blockMargin) + (block.size + blockMargin)));\n\t\t\t\t// Collision X\n\t\t\t\tif (playerX >= (block.x - blockMargin)\n\t\t\t\t\t&& playerX <= ((block.x - blockMargin) + (block.size + blockMargin))\n\t\t\t\t) {\n\t\n\t\t\t\t\tif (block.value > 0) {\n\t\t\t\t\t\tthis.blocked = true\n\t\t\t\t\t\tthis.hitBlock = block\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.blocked = false\n\t\t\t\t\t\tthis.hitBlock = null\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Update blocks position and handle blocks to remove\n\t\tif (!this.blocked) {\n\n\t\t\tthis.blocks = this.blocks.reduce((previous, block, key) => {\n\n\t\t\t\t// Remove the block from the array when outside of canvas\n\t\t\t\tif (block.y >= canvas.height) {\n\t\t\t\t\treturn previous;\n\t\t\t\t}\n\n\t\t\t\t// Remove the block from the array if value is 0\n\t\t\t\tif (block.value === 0) {\n\t\t\t\t\treturn previous\n\t\t\t\t}\n\n\t\t\t\tlet { y, ...props } = block\n\n\t\t\t\treturn previous.concat([{\n\t\t\t\t\ty: y += (this.SPEED * scale),\n\t\t\t\t\t...props\n\t\t\t\t}])\n\n\t\t\t}, []);\n\t\t}\n\t}\n\n\tupdateCircles() {\n\n\t\t// Value was not set yet\n\t\tif(this.lastCoordinateX === 0 || this.circles.length === 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif(this.lastCoordinateX >= 0 + this.CIRCLE_RADIUS && this.lastCoordinateX <= canvas.width - this.CIRCLE_RADIUS) {\n\n\t\t\tconst playerX = this.circles[0].x + this.CIRCLE_RADIUS;\n\t\t\tconst playerY = this.circles[0].y;\n\n\t\t\tlet lineCollision = this.lines.some((line) => {\n\t\t\t\treturn playerY >= line.yStart && playerY <= line.yEnd\n\t\t\t\t&& playerX >= line.xStart && playerX <= line.xStart + (this.LINE_WIDTH * scale)\n\t\t\t})\n\n\t\t\tif(!lineCollision) {\n\t\t\t\tthis.circles[0].x = this.lastCoordinateX\n\t\t\t\tthis.availableCircle.x = this.lastCoordinateX - 10\n\t\t\t}\n\t\t}\n\n\t\tfor(var i = 1; i < this.circles.length; i++) {\n\n\t\t\tconst circle = this.circles[i],\n\t\t\t\tprev = this.circles[i - 1],\n\t\t\t\tdistance = Math.sqrt((circle.x - prev.x) * (circle.x - prev.x)),\n\t\t\t\tspeed = Math.abs(circle.x - prev.x) / (2 * scale);\n\t\t\t\tcircle.y = prev.y + (this.CIRCLE_DIAMETER * scale);\n\t\t\t\n\t\t\tif(distance < speed) {\n\t\t\t\tcircle.x = prev.x;\n\t\t\t}\n\t\t\telse if(circle.x > prev.x && (circle.x - speed) >= 0) {\n\t\t\t\tcircle.x -= speed;\n\t\t\t}\n\t\t\telse if(circle.x < prev.x && (circle.x - speed) <= canvas.width) {\n\t\t\t\tcircle.x += speed;\n\t\t\t}     \n\t\t}\n\t}\n\n\t/**\n\t * Called every 500ms when player was colliding with a block\n\t * 当玩家与一个块碰撞时，每500毫秒调用一个\n\t */\n\thandleBlockCollision() {\n\t\tif (this.hitBlock !== null && this.hitBlock.value > 0 && this.availableCircle.value > 0) {\n\t\t\tthis.hitBlock.value -= 1\n\t\t\tthis.hitBlock.color = this.getBlockColor(this.hitBlock.value)\n\t\t\tthis.availableCircle.value -= 1\n\n\t\t\tif(this.availableCircle.value === 0 && !this.end) {\n\t\t\t\tthis.end = true\n\t\t\t\twindow.cancelAnimationFrame(this.play_animation)\n\n\t\t\t\t//绘制蜜蜂死亡\n\t\t\t\t// this.dieBeeFlag2 = false;\n\t\t\t\t// var n = 0;//帧数\n\t\t\t\t// function drawAni(){\n\t\t\t\t// \tdrawImage(\n\t\t\t\t// \t\t0,\n\t\t\t\t// \t\t0,\n\t\t\t\t// \t\t'static/assets/bg.png',\n\t\t\t\t// \t\tcanvas.width,\n\t\t\t\t// \t\tcanvas.height\n\t\t\t\t// \t)\n\t\t\t\t// \tn++;\n\t\t\t\t// }\n\n\t\t\t\t// var ani = setInterval(function(){\n\t\t\t\t// \tif(n>23){\n\t\t\t\t// \t\tthis.dieBeeFlag = true;\n\t\t\t\t// \t\tclearInterval(ani);\n\t\t\t\t// \t}else{\n\t\t\t\t// \t\tdrawAni();\n\t\t\t\t// \t\tconsole.log(n);\n\t\t\t\t// \t\tconsole.log(beeDiePageAssetsPath[n]);\n\t\t\t\t// \t}\n\t\t\t\t\t\n\t\t\t\t// }.bind(this),1000/20)\n\n\t\t\t\t\n\t\t\t\t//结束\n\t\t\t\tcanvas.removeEventListener(\"touchmove\", this.onTouch);\n\t\t\t\t//scanvas.addEventListener(\"touchstart\", this.onTouch);\n\n\t\t\t\tif(this.bestScore === 0 || this.score * 10 > this.bestScore) {\n\t\t\t\t\tthis.newBestScore = true\n\t\t\t\t\tthis.bestScore = this.score\n\t\t\t\t}\n\n\t\t\t\twindow.requestAnimationFrame(this.restartLabelAnimation)\n\t\t\t}\n\n\t\t\tthis.circles.pop()\n  \n\t\t}\n\t}\n\n\t/**\n\t * Add points on hidden the top of the canvas\n\t */\n\taddPoints() {\n\n\t\tif (this.blocked || this.end || this.pause) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst numberOfPoints = Math.floor(Math.random() * 3) + 1\n\n\t\tfor (var i = 0; i < numberOfPoints; i++) {\n\t\t\tthis.points.push({\n\t\t\t\tx: this.cols[i],\n\t\t\t\ty: -200,\n\t\t\t\tvalue: Math.floor(Math.random() * 5) + 1\n\t\t\t})\n\t\t}\n\t}\n\n\t/**\n\t * Update points y position and remove points with \n\t * y position upper than canvas height\n\t */\n\tupdatePoints() {\n\n\t\tif (this.blocked || this.end || this.pause) {\n\t\t\treturn false\n\t\t}\n\n\t\tthis.points = this.points.reduce((previous, point) => {\n\n\t\t\t// Check if the points y position are upper than canvas height\n\t\t\tif (point.y < (halfCanvasHeight * 2)) {\n\n\t\t\t\t// Collision with points点碰撞的事件\n\t\t\t\tif (point.y > (this.availableCircle.y - 40) && point.y < this.availableCircle.y + 40\n\t\t\t\t\t&& point.x > (this.availableCircle.x - 120) && point.x < this.availableCircle.x + 80\n\t\t\t\t) {\n\n\t\t\t\t\t// Adding points as circles on the screen\n\t\t\t\t\tfor (let i = 0; i < point.value; i++) {\n\t\t\t\t\t\tconst lastCircle = this.circles[this.circles.length - 1];\n\n\t\t\t\t\t\tthis.circles.push({\n\t\t\t\t\t\t\tx: lastCircle.x,\n\t\t\t\t\t\t\ty: lastCircle.y + (20 * scale) \n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.availableCircle.value += point.value;\n\t\t\t\t\tthis.score += point.value;\n\n\t\t\t\t\treturn previous\n\t\t\t\t} else {\n\n\t\t\t\t\tif (!this.blocked) {\n\n\t\t\t\t\t\tlet { y, ...props } = point;\n\n\t\t\t\t\t\treturn previous.concat([{\n\t\t\t\t\t\t\ty: y + (this.SPEED * scale),\n\t\t\t\t\t\t\t...props\n\t\t\t\t\t\t}])\n\t\t\t\t\t}\n\t\t\t\t\treturn previous\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn previous\n\t\t}, [])\n\t}\n\n\t/**\n\t * When user leave the tab pause the game\n\t * 当用户离开标签暂停游戏\n\t */\n\tonTabFocusOff = () => {\n\t\tif(document.visibilityState === 'hidden') {\n\t\t\tthis.pause = true;\n\t\t} else {\n\t\t\tthis.pause = false;\n\t\t}\n\t}\n\n\t/**\n\t * When user swipe on the screen during the game\n\t * 当用户在游戏过程中在屏幕上滑动时\n\t */\n\tonTouch = async ({ changedTouches }) => {\n\t\tconst touch = changedTouches[0];\n\n\t\t// Called when the game was ended and touch the screen\n\t\tif(this.end) {\n\t\t\t// Remove all listeners and interval before showing the start screen\n\t\t\tthis.restart = true\n\t\t\tcanvas.removeEventListener(\"touchstart\", this.onTouch)\n\t\t\tdocument.removeEventListener(\"visibilitychange\", this.onTabFocusOff)\n\t\t\treturn this.showStartScreen(this.run.bind(this))\n\t\t}\n\n\t\t// First touch\n\t\tif (this.lastCoordinateX === 0) {\n\t\t\tthis.lastCoordinateX = Math.abs(halfCanvasWidth - touch.pageX) * scale\n\t\t\treturn false\n\t\t}\n\n\t\tthis.distanceToX = Math.abs(this.lastCoordinateX - touch.pageX) * scale\n\t\tthis.swipeDirection = (this.lastCoordinateX > touch.pageX ? 'left' : 'right');\n\t\tthis.lastCoordinateX = touch.pageX * scale\n\t}\n\n\tapplyListeners() {\n\t\tthis.listenersApplied = true;\n\t\tcanvas.addEventListener(\"touchmove\", this.onTouch, false);\n\t\tdocument.addEventListener(\"visibilitychange\", this.onTabFocusOff);\n\t}\n\n\trestartLabelAnimation = (timestamp) => {\n\n\t\tif(!this.end || this.restart) {\n\t\t\treturn false\n\t\t}\n\n\t\tif(!this.restartLabelTime || this.restartLabelTime - this.restartLabelTime <= 100) {\n\t\t\tthis.restartLabelTime = timestamp;\n\n\t\t\tconst opacity = parseFloat(this.restartOpacity.toFixed(2));\n\n\t\t\tif(opacity <= 1 && !this.reverseOpacity) {\n\t\t\t\tthis.restartOpacity += 0.04\n\t\t\t\tif(opacity === 1) {\n\t\t\t\t\tthis.reverseOpacity = !this.reverseOpacity\n\t\t\t\t}\n\t\t\t} else if(opacity >= 0 && this.reverseOpacity) {\n\t\t\t\tthis.restartOpacity -= 0.04\n\t\t\t\tif(opacity === 0) {\n\t\t\t\t\tthis.reverseOpacity = !this.reverseOpacity\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.draw()\n\t\t\twindow.requestAnimationFrame(this.restartLabelAnimation)\n\t\t}\n\t}\n\n\t/**\n\t * Animation of circles before be able to play\n\t * 动画的圆形才能播放\n\t */\n\tbeforePlayAnimation = () => {\n\n\t\tconst startYPosition = halfCanvasHeight + (canvas.height / 6);\n\n\t\tif (this.circles[0].y > (startYPosition - (50 * scale))) {\n\n\t\t\tthis.availableCircle.y -= (6 * scale)\n\t\t\tthis.circles.map((circle, key) => {\n\t\t\t\tcircle.y -= (5 * scale) - ((2 * scale) * key)\n\t\t\t})\n\n\t\t\tthis.draw()\n\n\t\t\twindow.requestAnimationFrame(this.beforePlayAnimation)\n\t\t} else {\n\t\t\tthis.startAnimationEnded = true\n\t\t\tthis.applyListeners()\n\t\t\twindow.cancelAnimationFrame(this.before_play_animation)\n\t\t}\n\t}\n\n\t/**\n\t * Animation during the game session\n\t * 游戏过程中的动画\n\t * @param {number} timestamp \n\t */\n\tplayAnimation = (timestamp) => {\n\n\t\tif(this.startAnimationEnded === false || this.pause === true) {\n\t\t\treturn window.requestAnimationFrame(this.playAnimation)\n\t\t}\n\n\t\tif (!this.end) {\n\n\t\t\tif(!this.lastAddedTime && ! this.lastBlockCollisionTime) {\n\t\t\t\tthis.lastAddedTime = this.lastBlockCollisionTime =  timestamp\n\t\t\t\tthis.addPoints();\n\t\t\t\tthis.addBlocks();\n\t\t\t} else {\n\n\t\t\t\tif(timestamp - this.lastAddedTime >= 2000) {\n\t\t\t\t\t// Each 1,5s add points and blocks\n\t\t\t\t\tthis.addBlocks();\n\t\t\t\t\tthis.addPoints();\n\t\t\t\t\tthis.lastAddedTime = timestamp;\n\t\n\t\t\t\t} else if(timestamp - this.lastBlockCollisionTime >= 100) {\n\t\t\t\t\t// Each 100ms handle block collision\n\t\t\t\t\tif(this.blocked) {\n\t\t\t\t\t   this.handleBlockCollision() \n\t\t\t\t\t}\n\t\t\t\t\tthis.lastBlockCollisionTime = timestamp\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.updateCircles()\n\t\t\tthis.updateBlocks()\n\t\t\tthis.updatePoints()\n\t\t\tthis.updateLines()\n\t\t\tthis.draw()\n\t\t\tthis.finishGame()\n\t\t\t\n\n\t\t\twindow.requestAnimationFrame(this.playAnimation)\n\t\t} else {\n\t\t\tthis.draw()\n\t\t}\n\t}\n\n\n\t/**\n\t * Run the game\n\t */\n\tasync run(showStartScreen) {\n\n\t\tthis.showStartScreen = showStartScreen\n\n\t\t// Reset values\n\t\tthis.startAnimationEnded = false\n\t\tthis.listenersApplied = false\n\t\tthis.lastAddedTime = 0\n\t\tthis.lastBlockCollisionTime = 0\n\t\tthis.restartLabelTime = 0\n\t\tthis.restart = false;\n\t\tthis.availableCircle.x = halfCanvasWidth - (3 * scale)\n\t\tthis.availableCircle.y = (halfCanvasHeight + (canvas.height / 6)) - 20\n\t\tthis.availableCircle.value = 4\n\t\tthis.restartOpacity = 0\n\t\tthis.reverseOpacity = false\n\t\tthis.blocks = []\n\t\tthis.points = []\n\t\tthis.circles = []\n\t\tthis.cols = []\n\t\tthis.pause = false\n\t\tthis.blocked = false\n\t\tthis.hitBlock = null\n\t\tthis.end = false\n\t\tthis.finish = 0;\n\t\tthis.finishFlag = false;\n\t\tthis.lastCoordinateX = 0\n\t\t//分数重置\n\t\tthis.score = 0;\n\t\tthis.dieBeeFlag = false;\n\t\tthis.dieBeeFlag2 = true;\n\t\tthis.gameOver = setTimeout(function(){\n\t\t\tthis.finishFlag = true;\n\t\t\t//this.end = true;\n\t\t\t// console.log(this.end)\n\t\t}.bind(this),20000)\n\n\t\tconst defaultX = halfCanvasWidth\n\t\tconst defaultY = halfCanvasHeight + (canvas.height / 6)\n\n\t\tfor (let i = 0; i < this.availableCircle.value; i++) {\n\t\t\tthis.circles.push({ x: defaultX, y: defaultY })\n\t\t}\n\n\t\tif(localStorage.key('bestScore') !== null) {\n\t\t\tconst bestScore = localStorage.getItem('bestScore');\n\t\t\tif(bestScore) {\n\t\t\t\tthis.bestScore = parseInt(bestScore);\n\t\t\t} else {\n\t\t\t\tthis.bestScore = 0;\n\t\t\t}\n\t\t} else {\n\t\t\tthis.bestScore = 0;\n\t\t}\n\n\t\t// Initialization of columns for points position\n\t\tconst oneColWith = halfCanvasWidth / 2;\n\t\tfor(let i = 1; i <= 5; i++) {\n\t\t\tthis.cols.push(oneColWith * i)\n\t\t}\n\n\t\t// Draw the circle of the start screen\n\t\tthis.draw()\n\n\t\tthis.before_play_animation = window.requestAnimationFrame(this.beforePlayAnimation)\n\t\tthis.play_animation = window.requestAnimationFrame(this.playAnimation)\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/play.js"],"sourceRoot":""}